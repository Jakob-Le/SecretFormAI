<!DOCTYPE html>
<html lang = "en">
    <head>
        <meta charset = "UTF-8" />
        <meta name = "viewport" content = "width=device-width, initial-scale=1.0" />
        <title> Home </title>
        <link rel="stylesheet" href="styles.css" />
    </head>
    
    <body>
        <header>
            <nav class = "navbar">
                <div class = "dropdown">
                    <img src = "images/Content.png" alt = "Tabs Icon" class = "dropdown-toggle"/>
                    <div class = "dropdown-content">
                        <a href = "Forms">Forms</a>
                        <a href = "Preparing">Preparing</a>
                        <a href = "index.html">Info</a>
                        <a href = "Support">Support</a>
                        <a href = "chat.html">Chat</a>
                    </div>
                </div>
                <a href="#" id="profile-btn">
                    <img src="images/Profile.png" alt="Profile" />
                </a>
            </nav>
            <h1>FormAI</h1>
        </header>
        <main>
            <h2>Get Started</h2>
        </main>
        <script>
            document.addEventListener("DOMContentLoaded", function(){
                const toggle = document.querySelector(".dropdown-toggle");
                const menu = document.querySelector(".dropdown-content");
                if(toggle && menu){
                    toggle.addEventListener("click", function(event){
                        event.stopPropagation();
                        menu.style.display = (menu.style.display == "flex") ? "none" : "flex";
                    });
                    document.addEventListener("click", function (event){
                        if(!event.target.closest(".dropdown")){
                            menu.style.display = "none";
                        }
                    });
                }else{
                    console.error("dropdown toggle or menu not found");
                }
            });
        </script>
        <div id="modal-container"></div>
        <script>
          fetch("modal.html")
            .then((res) => res.text())
            .then((html) => {
            document.getElementById("modal-container").innerHTML = html;

            // Now attach modal behavior AFTER modal has loaded
            const profileBtn = document.getElementById("profile-btn");
            const modal = document.getElementById("auth-modal");
            const closeBtn = document.querySelector(".close-button");
            const switchToSignup = document.getElementById("switch-to-signup");
            const modalTitle = document.getElementById("modal-title");
            const nameField = document.getElementById("name-field");
            const authForm = document.getElementById("auth-form");
            const authSubmit = document.getElementById("auth-submit");
            let isSignup = false;

            profileBtn.addEventListener("click", function (e) {
                e.preventDefault();
                modal.classList.remove("hidden");
            });

            closeBtn.addEventListener("click", function () {
                modal.classList.add("hidden");
            });

            window.addEventListener("click", function (e) {
                if (e.target === modal) {
                modal.classList.add("hidden");
                }
            });

            switchToSignup.addEventListener("click", function (e) {
                e.preventDefault();
                isSignup = !isSignup;
                if (isSignup) {
                modalTitle.textContent = "Sign Up";
                authSubmit.textContent = "Sign Up";
                nameField.classList.remove("hidden");
                switchToSignup.textContent = "Back to Login";
                } else {
                modalTitle.textContent = "Login";
                authSubmit.textContent = "Login";
                nameField.classList.add("hidden");
                switchToSignup.textContent = "Sign up";
                }
            });

            authForm.addEventListener("submit", function (e) {
                e.preventDefault();
                const name = document.getElementById("name")?.value;
                const username = document.getElementById("username").value;
                const password = document.getElementById("password").value;

                if (isSignup) {
                alert(`Signed up:\nName: ${name}\nUsername: ${username}`);
                } else {
                alert(`Logged in as: ${username}`);
                }

                modal.classList.add("hidden");
            });
            });
        </script>


    </body>
</html>
